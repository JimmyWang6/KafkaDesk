<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.kafkadesk.ui.controller.MainController"
            prefHeight="800.0" prefWidth="1200.0">

    <!-- 顶部：菜单栏 -->
    <top>
        <VBox>
            <MenuBar>
                <Menu text="文件">
                    <MenuItem text="添加集群" onAction="#handleAddCluster"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="退出" onAction="#handleExit"/>
                </Menu>
                <Menu text="视图">
                    <MenuItem text="刷新主题列表" onAction="#handleRefreshTopics"/>
                </Menu>
                <Menu text="帮助">
                    <MenuItem text="关于" onAction="#handleAbout"/>
                </Menu>
            </MenuBar>
            
            <!-- 工具栏 -->
            <ToolBar>
                <Button text="添加集群" onAction="#handleAddCluster"/>
                <Separator orientation="VERTICAL"/>
                <Button text="刷新" onAction="#handleRefreshTopics"/>
            </ToolBar>
        </VBox>
    </top>

    <!-- 中间：主工作区 -->
    <center>
        <SplitPane dividerPositions="0.25">
            <!-- 左侧：集群树 -->
            <VBox>
                <padding>
                    <Insets top="10" right="10" bottom="10" left="10"/>
                </padding>
                <Label text="Kafka 集群" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                <TreeView fx:id="clusterTreeView" VBox.vgrow="ALWAYS">
                    <VBox.margin>
                        <Insets top="10"/>
                    </VBox.margin>
                </TreeView>
            </VBox>

            <!-- 右侧：主工作区 -->
            <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
                
                <!-- 主题管理标签页 -->
                <Tab fx:id="topicTab" text="主题管理">
                    <SplitPane orientation="VERTICAL" dividerPositions="0.6">
                        <!-- 主题列表 -->
                        <VBox>
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="主题列表" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                            <TableView fx:id="topicTableView" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="topicNameColumn" text="主题名称" prefWidth="300"/>
                                    <TableColumn fx:id="topicPartitionsColumn" text="分区数" prefWidth="100"/>
                                    <TableColumn fx:id="topicReplicationColumn" text="副本因子" prefWidth="100"/>
                                </columns>
                                <VBox.margin>
                                    <Insets top="10"/>
                                </VBox.margin>
                            </TableView>
                        </VBox>

                        <!-- 主题详情 -->
                        <VBox>
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="主题详情" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                            <TextArea fx:id="topicDetailsTextArea" editable="false" VBox.vgrow="ALWAYS">
                                <VBox.margin>
                                    <Insets top="10"/>
                                </VBox.margin>
                            </TextArea>
                        </VBox>
                    </SplitPane>
                </Tab>

                <!-- 消息生产标签页 -->
                <Tab fx:id="producerTab" text="消息生产">
                    <VBox spacing="10">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="发送消息到 Kafka" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="主题:"/>
                            <TextField fx:id="producerTopicField" promptText="输入主题名称" HBox.hgrow="ALWAYS"/>
                        </HBox>

                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Key:"/>
                            <TextField fx:id="producerKeyField" promptText="消息 Key (可选)" HBox.hgrow="ALWAYS"/>
                        </HBox>

                        <Label text="消息内容:"/>
                        <TextArea fx:id="producerMessageTextArea" 
                                  promptText="输入消息内容..." 
                                  VBox.vgrow="ALWAYS"
                                  wrapText="true"/>

                        <HBox spacing="10" alignment="CENTER_RIGHT">
                            <Button fx:id="sendMessageButton" text="发送消息" 
                                    style="-fx-font-size: 14px; -fx-padding: 10 20;"/>
                        </HBox>
                    </VBox>
                </Tab>

                <!-- 消息消费标签页 -->
                <Tab fx:id="consumerTab" text="消息消费">
                    <SplitPane orientation="VERTICAL" dividerPositions="0.6">
                        <!-- 消息列表 -->
                        <VBox>
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>

                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="选择主题:"/>
                                <ComboBox fx:id="consumerTopicComboBox" promptText="选择主题" HBox.hgrow="ALWAYS"/>
                                <Button text="开始消费"/>
                                <Button text="停止"/>
                            </HBox>

                            <Label text="消息列表" style="-fx-font-size: 14px; -fx-font-weight: bold;">
                                <VBox.margin>
                                    <Insets top="10"/>
                                </VBox.margin>
                            </Label>

                            <TableView fx:id="consumerTableView" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="offsetColumn" text="Offset" prefWidth="100"/>
                                    <TableColumn fx:id="keyColumn" text="Key" prefWidth="150"/>
                                    <TableColumn fx:id="valueColumn" text="Value" prefWidth="400"/>
                                    <TableColumn fx:id="timestampColumn" text="Timestamp" prefWidth="180"/>
                                </columns>
                                <VBox.margin>
                                    <Insets top="10"/>
                                </VBox.margin>
                            </TableView>
                        </VBox>

                        <!-- 消息详情 -->
                        <VBox>
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="消息详情" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                            <TextArea fx:id="consumerDetailsTextArea" editable="false" VBox.vgrow="ALWAYS">
                                <VBox.margin>
                                    <Insets top="10"/>
                                </VBox.margin>
                            </TextArea>
                        </VBox>
                    </SplitPane>
                </Tab>
            </TabPane>
        </SplitPane>
    </center>

    <!-- 底部：状态栏 -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #f0f0f0; -fx-padding: 5;">
            <Label fx:id="statusLabel" text="就绪"/>
        </HBox>
    </bottom>
</BorderPane>
